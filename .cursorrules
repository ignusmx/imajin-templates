# ğŸš€ **Imajin Templates - Cursor Code Generation Rules**

## **1. Template Creation Standards**

### **1.1 Docker-First Development**
âœ… **ALL templates MUST use Docker for development** - No exceptions.  
âœ… **Port 3000 standardization** - All templates expose their main service on port 3000.  
âœ… **Multi-stage Dockerfiles** - Separate development and production stages.  
âœ… **Docker Compose for development** - Include all services (app, database, cache, etc.).  
âœ… **Volume mounts for hot reload** - Enable live code reloading in development.  

### **1.2 Required Template Structure**
```
template-name/
â”œâ”€â”€ README.md                    # Comprehensive setup guide
â”œâ”€â”€ .env.example                # All environment variables documented
â”œâ”€â”€ .gitignore                  # Framework-specific patterns
â”œâ”€â”€ Dockerfile                  # Multi-stage (dev + prod)
â”œâ”€â”€ docker-compose.yml          # Development environment
â”œâ”€â”€ docker-compose.prod.yml     # Production environment (optional)
â”œâ”€â”€ .dockerignore              # Docker build optimization
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup.sh               # Automated setup script
â”‚   â”œâ”€â”€ dev.sh                 # Development startup script
â”‚   â””â”€â”€ test.sh                # Testing script
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml             # Continuous integration
â”‚       â””â”€â”€ cd.yml             # Continuous deployment
â””â”€â”€ docs/
    â”œâ”€â”€ DEVELOPMENT.md         # Development guide
    â”œâ”€â”€ DEPLOYMENT.md          # Production deployment
    â””â”€â”€ ARCHITECTURE.md        # Design decisions
```

### **1.3 Docker Configuration Requirements**
âœ… **Development Dockerfile stage**:
   - Use official base images (node:18-alpine, ruby:3.2-alpine, etc.)
   - Install development dependencies
   - Configure hot reload/live reloading
   - Set up debugging capabilities
   
âœ… **Production Dockerfile stage**:
   - Multi-stage build for optimization
   - Remove development dependencies
   - Use non-root user for security
   - Implement health checks

âœ… **Docker Compose requirements**:
   - Main app service on port 3000
   - Database service (PostgreSQL preferred)
   - Cache service (Redis) when applicable
   - Volume mounts for development
   - Environment variable configuration
   - Restart policies

---

## **2. Language-Specific Template Rules**

### **2.1 Ruby Templates (Rails/Sinatra)**
âœ… **Ruby version**: Use Ruby 3.2+ with Alpine Linux base image.  
âœ… **Database**: PostgreSQL as default, with database.yml configured for Docker.  
âœ… **Cache**: Redis integration for session/cache storage.  
âœ… **Asset pipeline**: Configured for Docker environment.  
âœ… **Testing**: RSpec with Factory Bot, database cleaner setup.  
âœ… **Gems**: Include essential gems (rubocop, brakeman, bullet, etc.).  

**Docker Compose example for Ruby**:
```yaml
services:
  app:
    build: 
      context: .
      target: development
    ports:
      - "3000:3000"
    volumes:
      - .:/app
      - bundle_cache:/usr/local/bundle
    environment:
      - DATABASE_URL=postgresql://postgres:password@db:5432/app_development
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - db
      - redis
    command: rails server -b 0.0.0.0 -p 3000

  db:
    image: postgres:15-alpine
    environment:
      POSTGRES_PASSWORD: password
      POSTGRES_DB: app_development
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
  bundle_cache:
```

### **2.2 Node.js Templates (Next.js, Express)**
âœ… **Node version**: Use Node 20+ with Alpine Linux base image.  
âœ… **Package manager**: Use npm or pnpm consistently.  
âœ… **TypeScript**: Default to TypeScript for all Node.js templates.  
âœ… **Database**: PostgreSQL with Prisma/Drizzle ORM.  
âœ… **Testing**: Jest + Testing Library setup.  
âœ… **Linting**: ESLint + Prettier configured.  

### **2.3 Python Templates (Django, FastAPI)**
âœ… **Python version**: Use Python 3.11+ with Alpine Linux base image.  
âœ… **Package management**: Use Poetry or pip with requirements.txt.  
âœ… **Database**: PostgreSQL with SQLAlchemy/Django ORM.  
âœ… **Testing**: pytest with fixtures and factories.  
âœ… **Linting**: Black, flake8, mypy configured.  

### **2.4 Go Templates (Gin, Echo)**
âœ… **Go version**: Use Go 1.21+ with Alpine Linux base image.  
âœ… **Dependency management**: Use Go modules.  
âœ… **Database**: PostgreSQL with sqlx or GORM.  
âœ… **Testing**: Standard testing package + testify.  
âœ… **Linting**: golangci-lint configured.  

---

## **3. Development Workflow Standards**

### **3.1 Quick Start Commands**
Every template MUST provide these commands:
```bash
# Setup and start development environment
./scripts/setup.sh
./scripts/dev.sh

# Alternative Docker Compose commands
docker-compose up --build
docker-compose exec app [command]
```

### **3.2 Environment Variables**
âœ… **Comprehensive .env.example** - Document ALL environment variables.  
âœ… **Docker-friendly defaults** - Variables should work in containerized environment.  
âœ… **Security considerations** - No secrets in defaults, use placeholder values.  

### **3.3 Database Management**
âœ… **Database initialization** - Automated setup scripts.  
âœ… **Migrations** - Framework-appropriate migration system.  
âœ… **Seed data** - Example data for development.  
âœ… **Reset scripts** - Easy database reset for development.  

---

## **4. Testing & Quality Standards**

### **4.1 Testing Requirements**
âœ… **Unit tests** - Core business logic coverage.  
âœ… **Integration tests** - API endpoint testing.  
âœ… **Docker test environment** - Tests run in containers.  
âœ… **CI/CD integration** - Automated testing in GitHub Actions.  

### **4.2 Code Quality**
âœ… **Linting configuration** - Language-appropriate linters.  
âœ… **Code formatting** - Consistent formatting rules.  
âœ… **Pre-commit hooks** - Quality checks before commits.  
âœ… **Security scanning** - Vulnerability detection tools.  

---

## **5. Documentation Standards**

### **5.1 README Template Structure**
```markdown
# [Template Name]

## ğŸ¯ Overview
Brief description and use cases

## ğŸ“‹ Prerequisites
- Docker & Docker Compose
- Git

## âš¡ Quick Start
```bash
git clone [template]
cd [template]
./scripts/setup.sh
./scripts/dev.sh
```
Open http://localhost:3000

## ğŸ”§ Development
Detailed development instructions

## ğŸ“ Project Structure
Key directories and files explained

## ğŸ› ï¸ Available Scripts
All scripts documented

## ğŸ§ª Testing
Testing instructions

## ğŸš€ Deployment
Production deployment guide
```

### **5.2 Documentation Requirements**
âœ… **Step-by-step setup** - Assume no prior knowledge.  
âœ… **Troubleshooting section** - Common issues and solutions.  
âœ… **Architecture decisions** - Explain design choices.  
âœ… **Performance considerations** - Optimization tips.  

---

## **6. Security & Production Standards**

### **6.1 Security Defaults**
âœ… **Non-root Docker user** - Run containers with restricted permissions.  
âœ… **Health checks** - Container health monitoring.  
âœ… **Secrets management** - Proper environment variable handling.  
âœ… **CORS configuration** - Secure cross-origin settings.  

### **6.2 Production Readiness**
âœ… **Logging configuration** - Structured logging setup.  
âœ… **Monitoring hooks** - Application performance monitoring.  
âœ… **Graceful shutdown** - Handle container stop signals.  
âœ… **Static file serving** - Optimized asset delivery.  

---

## **7. CI/CD Pipeline Standards**

### **7.1 GitHub Actions Workflow**
```yaml
name: CI
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Build and test
        run: |
          docker-compose up -d
          docker-compose exec -T app ./scripts/test.sh
      - name: Cleanup
        run: docker-compose down -v
```

### **7.2 Quality Gates**
âœ… **All tests pass** - No failing tests allowed.  
âœ… **Code coverage** - Minimum coverage thresholds.  
âœ… **Security scan** - No high-severity vulnerabilities.  
âœ… **Docker build** - Successful container builds.  

---

## **8. Template Maintenance**

### **8.1 Version Management**
âœ… **Semantic versioning** - Use git tags for versions.  
âœ… **Changelog maintenance** - Document all changes.  
âœ… **Dependency updates** - Regular security updates.  
âœ… **Migration guides** - Help users upgrade between versions.  

### **8.2 Community Standards**
âœ… **Issue templates** - Standardized bug reports and feature requests.  
âœ… **Contributing guide** - Clear contribution instructions.  
âœ… **Code of conduct** - Community behavior standards.  
âœ… **License clarity** - MIT license for all templates.  

---

## **9. Performance & Optimization**

### **9.1 Docker Optimization**
âœ… **Multi-stage builds** - Minimize production image size.  
âœ… **Layer caching** - Optimize build times.  
âœ… **.dockerignore** - Exclude unnecessary files.  
âœ… **Base image selection** - Use appropriate minimal images.  

### **9.2 Development Experience**
âœ… **Fast startup times** - Optimize container startup.  
âœ… **Hot reload** - Live code reloading in development.  
âœ… **Debug support** - Debugging capabilities configured.  
âœ… **IDE integration** - VS Code settings and extensions.  

---

## **10. Template Generation Commands**

When creating new templates, use these standardized approaches:

### **10.1 Template Creation Workflow**
1. **Create directory structure**: `mkdir -p templates/[language]/[framework]`
2. **Copy base template**: Use existing template as starting point
3. **Configure Docker**: Set up Dockerfile and docker-compose.yml
4. **Add scripts**: Create setup.sh, dev.sh, test.sh
5. **Write documentation**: Complete README and docs/
6. **Test thoroughly**: Verify complete setup process
7. **Update main README**: Add template to available list

### **10.2 Validation Checklist**
- [ ] Template starts with `./scripts/setup.sh && ./scripts/dev.sh`
- [ ] Application accessible on `http://localhost:3000`
- [ ] All tests pass with `./scripts/test.sh`
- [ ] Docker images build successfully
- [ ] Documentation is complete and accurate
- [ ] Security best practices implemented

---

**ğŸ¯ Remember: Every template should enable developers to go from `git clone` to running application in under 2 minutes with just Docker installed.** 